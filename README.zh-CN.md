# Kube Tide

![Kube Tide Logo](docs/images/logo.png)

ä¸€ä¸ªåŸºäº Go å’Œ React çš„ç°ä»£åŒ– Kubernetes å¤šé›†ç¾¤ç®¡ç†å¹³å°ï¼Œæä¾›ç›´è§‚çš„ Web ç•Œé¢æ¥ç®€åŒ– Kubernetes èµ„æºç®¡ç†å’Œè¿ç»´æ“ä½œã€‚

[ä¸­æ–‡æ–‡æ¡£](README.zh-CN.md) | [English](README.md)

## âœ¨ ä¸»è¦ç‰¹æ€§

### ğŸŒ é›†ç¾¤ç®¡ç†

- âœ… å¤šé›†ç¾¤æ”¯æŒå’Œç®¡ç†
- âœ… é›†ç¾¤è¿æ¥æµ‹è¯•
- âœ… é›†ç¾¤èµ„æºæ¦‚è§ˆ
- âœ… é›†ç¾¤å¥åº·çŠ¶æ€ç›‘æ§

### ğŸ–¥ï¸ èŠ‚ç‚¹ç®¡ç†

- âœ… èŠ‚ç‚¹çŠ¶æ€ç›‘æ§å’Œè¯¦æƒ…æŸ¥çœ‹
- âœ… èŠ‚ç‚¹èµ„æºä½¿ç”¨æƒ…å†µå¯è§†åŒ–
- âœ… èŠ‚ç‚¹æ’æ°´(Drain)æ“ä½œ
- âœ… ç¦æ­¢/å…è®¸è°ƒåº¦(Cordon/Uncordon)
- âœ… èŠ‚ç‚¹æ±¡ç‚¹(Taints)ç®¡ç†
- âœ… èŠ‚ç‚¹æ ‡ç­¾(Labels)ç®¡ç†
- âœ… èŠ‚ç‚¹æ± (Node Pools)åˆ›å»ºå’Œç®¡ç†

### ğŸš€ å·¥ä½œè´Ÿè½½ç®¡ç†

#### Pod ç®¡ç†

- âœ… Pod æŸ¥çœ‹ã€è¯¦æƒ…å’Œåˆ é™¤
- âœ… å®æ—¶ Pod æ—¥å¿—æŸ¥çœ‹
- âœ… Pod ç»ˆç«¯è¿æ¥
- âœ… Pod èµ„æºç›‘æ§ï¼ˆCPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨æƒ…å†µï¼‰
- âœ… Pod æŒ‡æ ‡å†å²æ•°æ®å¯è§†åŒ–
- âœ… Pod äº‹ä»¶æŸ¥çœ‹

#### Deployment ç®¡ç†

- âœ… Deployment åˆ›å»ºå’Œç®¡ç†
- âœ… Deployment æ‰©ç¼©å®¹å’Œé‡å¯
- âœ… Deployment è¯¦æƒ…æŸ¥çœ‹
- âœ… Deployment æ›´æ–°ç­–ç•¥é…ç½®
- âœ… Deployment å¥åº·æ£€æŸ¥é…ç½®
- âœ… Deployment èµ„æºé™åˆ¶é…ç½®
- âœ… Deployment èŠ‚ç‚¹äº²å’Œæ€§é…ç½®

#### StatefulSet ç®¡ç†

- âœ… StatefulSet åŸºæœ¬ç®¡ç†åŠŸèƒ½
- âœ… StatefulSet æ‰©ç¼©å®¹
- âœ… StatefulSet è¯¦æƒ…æŸ¥çœ‹

#### Service ç®¡ç†

- âœ… Service åˆ›å»ºå’Œç®¡ç†
- âœ… Service è¯¦æƒ…æŸ¥çœ‹
- âœ… Service ç«¯ç‚¹ç›‘æ§

### ğŸ“Š ç›‘æ§å’Œå¯è§‚æµ‹æ€§

- âœ… å®æ—¶èµ„æºç›‘æ§
- âœ… æŒ‡æ ‡æ•°æ®å¯è§†åŒ–
- âœ… é›†ç¾¤å’ŒèŠ‚ç‚¹èµ„æºæ¦‚è§ˆ
- âœ… Pod æ€§èƒ½æŒ‡æ ‡å†å²è®°å½•

### ğŸŒ å›½é™…åŒ–æ”¯æŒ

- âœ… ä¸­è‹±æ–‡å¤šè¯­è¨€æ”¯æŒ
- âœ… åŠ¨æ€è¯­è¨€åˆ‡æ¢

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯

- **Go** - ä¸»è¦ç¼–ç¨‹è¯­è¨€
- **Gin** - Web æ¡†æ¶
- **client-go** - Kubernetes å®¢æˆ·ç«¯åº“
- **WebSocket** - å®æ—¶é€šä¿¡
- **Logrus** - æ—¥å¿—è®°å½•

### å‰ç«¯

- **React 18** - å‰ç«¯æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Ant Design** - UI ç»„ä»¶åº“
- **Vite** - æ„å»ºå·¥å…·
- **React Router** - è·¯ç”±ç®¡ç†
- **Axios** - HTTP å®¢æˆ·ç«¯
- **ECharts** - æ•°æ®å¯è§†åŒ–

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

å¹³å°é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼š

- **å‰ç«¯**ï¼šReact SPA åº”ç”¨ï¼Œé€šè¿‡ RESTful API å’Œ WebSocket ä¸åç«¯é€šä¿¡
- **åç«¯**ï¼šGo å¾®æœåŠ¡ï¼Œé€šè¿‡ client-go ä¸å¤šä¸ª Kubernetes é›†ç¾¤äº¤äº’
- **å®æ—¶é€šä¿¡**ï¼šWebSocket æ”¯æŒå®æ—¶æ—¥å¿—æŸ¥çœ‹å’Œç»ˆç«¯è¿æ¥

### æ¶æ„ç‰¹ç‚¹

- ğŸ”„ **å¤šé›†ç¾¤æ”¯æŒ**
- ğŸš€ **é«˜æ€§èƒ½ç¼“å­˜**
- ğŸ” **å®‰å…¨è®¤è¯**
- ğŸ“Š **å®æ—¶ç›‘æ§**
- ğŸŒ **å›½é™…åŒ–**

## ğŸ“ ç›®å½•ç»“æ„

```plaintext
kube-tide/
â”œâ”€â”€ cmd/                    # åº”ç”¨ç¨‹åºå…¥å£ç‚¹
â”‚   â”œâ”€â”€ kube-tide/          # CLI å…¥å£
â”‚   â””â”€â”€ server/             # æœåŠ¡å™¨å…¥å£
â”œâ”€â”€ configs/                # é…ç½®æ–‡ä»¶
â”œâ”€â”€ docs/                   # æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture.md     # æ¶æ„æ–‡æ¡£
â”‚   â”œâ”€â”€ code_arch.md        # ä»£ç æ¶æ„
â”‚   â””â”€â”€ images/             # æ–‡æ¡£å›¾ç‰‡
â”œâ”€â”€ internal/               # å†…éƒ¨åŒ…
â”‚   â”œâ”€â”€ api/                # API å¤„ç†å™¨å’Œè·¯ç”±
â”‚   â”‚   â””â”€â”€ middleware/     # HTTP ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â””â”€â”€ k8s/            # Kubernetes èµ„æºç®¡ç†
â”‚   â””â”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ i18n/           # å›½é™…åŒ–
â”‚       â””â”€â”€ logger/         # æ—¥å¿—å·¥å…·
â”œâ”€â”€ pkg/                    # å¯å¯¼å‡ºçš„åŒ…
â”‚   â””â”€â”€ embed/              # åµŒå…¥å¼èµ„æº
â”œâ”€â”€ web/                    # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ public/             # é™æ€èµ„æº
â”‚   â””â”€â”€ src/                # æºä»£ç 
â”‚       â”œâ”€â”€ api/            # API å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ components/     # React ç»„ä»¶
â”‚       â”œâ”€â”€ i18n/           # å›½é™…åŒ–
â”‚       â”œâ”€â”€ layouts/        # é¡µé¢å¸ƒå±€
â”‚       â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚       â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
â””â”€â”€ Makefile                # æ„å»ºè„šæœ¬
```

## ğŸš€ å®‰è£…å’Œä½¿ç”¨

### ç¯å¢ƒè¦æ±‚

- Go 1.19 æˆ–æ›´é«˜ç‰ˆæœ¬
- Node.js 16 æˆ–æ›´é«˜ç‰ˆæœ¬
- pnpm åŒ…ç®¡ç†å™¨
- å¯è®¿é—®çš„ Kubernetes é›†ç¾¤

### å¿«é€Ÿå¼€å§‹

1. **å…‹éš†ä»“åº“**

   ```bash
   git clone https://github.com/bpzhang/kube-tide.git
   cd kube-tide
   ```

2. **æ„å»ºå’Œè¿è¡Œ**

   ```bash
   # æ„å»ºç”Ÿäº§ç‰ˆæœ¬ï¼ˆå‰ç«¯å’Œåç«¯ï¼‰
   make build-prod
   
   # è¿è¡Œåº”ç”¨ç¨‹åº
   make run-prod
   ```

3. **è®¿é—® Web ç•Œé¢**

   ```text
   http://localhost:8080
   ```

### å¼€å‘ç¯å¢ƒæ­å»º

1. **åç«¯å¼€å‘**

   ```bash
   # å®‰è£… Go ä¾èµ–
   go mod download
   
   # ä»¥å¼€å‘æ¨¡å¼è¿è¡Œåç«¯
   make dev
   ```

2. **å‰ç«¯å¼€å‘**

   ```bash
   cd web
   pnpm install
   pnpm dev
   ```

### å¯ç”¨çš„ Make å‘½ä»¤

- `make build` - æ„å»ºé¡¹ç›®ï¼ˆå‰ç«¯å’Œåç«¯ï¼‰
- `make build-prod` - æ„å»ºç”Ÿäº§ç‰ˆæœ¬
- `make build-web` - ä»…æ„å»ºå‰ç«¯
- `make build-backend` - ä»…æ„å»ºåç«¯
- `make run` - è¿è¡Œåº”ç”¨ç¨‹åº
- `make run-prod` - è¿è¡Œç”Ÿäº§ç‰ˆæœ¬
- `make dev` - ä»¥å¼€å‘æ¨¡å¼è¿è¡Œ
- `make test` - è¿è¡Œæµ‹è¯•
- `make verify` - è¿è¡ŒéªŒè¯ï¼ˆMaven é£æ ¼ï¼‰
- `make clean` - æ¸…ç†æ„å»ºäº§ç‰©

## ğŸ”§ é…ç½®

åº”ç”¨ç¨‹åºå¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼é…ç½®ï¼š

- **ç¯å¢ƒå˜é‡**
- **é…ç½®æ–‡ä»¶**ï¼ˆ`configs/config.yaml`ï¼‰
- **å‘½ä»¤è¡Œå‚æ•°**

ä¸»è¦é…ç½®é€‰é¡¹ï¼š

- æœåŠ¡å™¨ç«¯å£å’Œä¸»æœº
- Kubernetes é›†ç¾¤é…ç½®
- æ—¥å¿—çº§åˆ«
- å‰ç«¯æ„å»ºè®¾ç½®

## ğŸ“š æ–‡æ¡£

- [æ¶æ„æ–‡æ¡£](docs/architecture.md)
- [ä»£ç æ¶æ„](docs/code_arch.md)
- [TODO åˆ—è¡¨](docs/TODO.md)

## ğŸ—ºï¸ è·¯çº¿å›¾

### å³å°†æ¨å‡ºçš„åŠŸèƒ½

- ConfigMap å’Œ Secret ç®¡ç†
- å­˜å‚¨ç®¡ç†ï¼ˆPVã€PVCã€StorageClassï¼‰
- ç›‘æ§ç³»ç»Ÿé›†æˆï¼ˆPrometheusï¼‰
- RBAC æƒé™ç®¡ç†
- CI/CD é›†æˆ
- Helm Chart æ”¯æŒ

æŸ¥çœ‹å®Œæ•´çš„ [TODO åˆ—è¡¨](docs/TODO.md) äº†è§£è¯¦ç»†è§„åˆ’ã€‚

## ğŸ¤ è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿è´¡çŒ®ï¼è¯·éšæ—¶æäº¤ Pull Request æˆ– Issue æ¥æ”¹è¿›é¡¹ç›®ã€‚

### å¼€å‘æŒ‡å—

- éµå¾ª Go å®˜æ–¹ä»£ç æ ‡å‡†
- ä¸ºæ–°åŠŸèƒ½åŒ…å«é€‚å½“çš„æµ‹è¯•
- å¿…è¦æ—¶æ›´æ–°æ–‡æ¡£
- ç¡®ä¿å‰ç«¯ä»£ç çš„ TypeScript ç±»å‹å®‰å…¨

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT è®¸å¯è¯](LICENSE)ã€‚

## ğŸ™ è‡´è°¢

- [Kubernetes](https://kubernetes.io/) - å‡ºè‰²çš„å®¹å™¨ç¼–æ’å¹³å°
- [client-go](https://github.com/kubernetes/client-go) - å®˜æ–¹ Kubernetes Go å®¢æˆ·ç«¯åº“
- [Ant Design](https://ant.design/) - ä¼˜ç§€çš„ React UI åº“
- [Gin](https://gin-gonic.com/) - é«˜æ€§èƒ½ Go Web æ¡†æ¶
